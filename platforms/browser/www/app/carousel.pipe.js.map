{"version":3,"file":"carousel.pipe.js","sourceRoot":"","sources":["../src/app/carousel.pipe.ts"],"names":[],"mappings":"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","sourcesContent":["import {Pipe, PipeTransform} from '@angular/core';\nimport {EventDataService} from './event-data.service';\n\n\n@Pipe({\n  name: 'carousel'\n})\nexport class Carousel implements PipeTransform {\n  constructor(){}\n\n   transform(value: any[], term): any[] {\n     \n    return value.map(items => {\n      \n      // Remove the '-' from the date so that we can filter the list later.\n      let newItems = items.map(a => {\n        a['start_date'] = a['start_date'].replace(/-/gi, '');\n        return a;\n      });\n      \n      // Filter out invalid dates.\n      newItems = newItems.filter(a => {\n        let date = Number(a['start_date']);\n        let currentDate = Number(new Date().toLocaleDateString().replace(/-/gi, ''));\n        if (date < currentDate) {\n          return false;\n        }\n        return !isNaN(date);\n      });\n      \n      // Sort the list by date.\n      newItems.sort((a, b) => {\n        let num1 = Number(a['start_date']);\n        let num2 = Number(b['start_date']);\n        \n        if(num1 < num2) {\n          return -1;\n        }\n        \n        if (num1 > num2){\n          return 1;\n        }    \n        \n        return 0;    \n      });\n      \n      // Add '-' to the date.\n      newItems = newItems.map(a => {\n        let dateAsString = a['start_date'];\n        if(dateAsString.length == 8) {\n          let year = dateAsString[0] + dateAsString[1] + dateAsString[2] + dateAsString[3] + '-';\n          let month = dateAsString[4] + dateAsString[5] + '-';\n          let day  = dateAsString[6] + dateAsString[7];\n          a['start_date'] = year + month + day;\n          return a;\n        }\n        \n        return a;\n      });\n      \n      // Make the list the size of 5\n      newItems = newItems.filter((a, index) => {\n        if(index < 5) return true;\n        \n        return false;\n      });\n      \n      return newItems;     \n    });\n  }\n}\n"]}