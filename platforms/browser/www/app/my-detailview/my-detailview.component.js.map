{"version":3,"file":"my-detailview.component.js","sourceRoot":"","sources":["../../src/app/my-detailview/my-detailview.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit, Inject, NgZone} from '@angular/core';\nimport {Event, FullEvent} from '../IEvent';\nimport {AngularFire, FirebaseListObservable, FirebaseObjectObservable, FirebaseRef} from 'angularfire2';\nimport {MyCommentComponent} from '../my-comment';\nimport {RouteData, Router, RouteParams, OnActivate, ComponentInstruction, CanActivate} from '@angular/router-deprecated';\nimport {Http} from '@angular/http';\nimport {RouteConfig, ROUTER_DIRECTIVES, ROUTER_PROVIDERS} from '@angular/router-deprecated';\nimport { DateHandlerService } from '../date-handler.service';\nimport {MyEventsService} from '../my-events.service';\nimport {MyUsersService} from '../my-users.service';\nimport {CameraService} from '../camera.service';\n\n\n@Component({\n  moduleId: module.id,\n  selector: 'my-detailview',\n  templateUrl: 'my-detailview.component.html',\n  styleUrls: ['my-detailview.component.css'],\n  providers: [DateHandlerService, CameraService], \n  directives: [MyCommentComponent],\n  inputs: ['comments']\n})\n//@CanActivate(() => tokenNotExpired())\nexport class MyDetailviewComponent implements OnInit {\n\n  eventId = \"\"\n  newEvent = false\n  imgSrc: HTMLImageElement; \n\n  constructor(public myUsersService : MyUsersService, \n              public myEventsService: MyEventsService, \n              private dateHandlerService: DateHandlerService, \n              public data: RouteData, \n              public params: RouteParams, \n              private router: Router, \n              private _zone : NgZone,\n              public cameraService : CameraService) {\n  }\n  event: FullEvent = {name: \"\",\n                      start_date: \"\",\n                      end_date:\"\",\n                      start_time: \"\",\n                      end_time: \"\",\n                      description: \"\",\n                      adress: \"\",\n                      comments: [null],\n                      price: \"\",\n                      organizer: \"\",\n                      phone: \"\",\n                      email: \"\",\n                      uid: null,\n                      imageURL: \"\"}\n  \n  ngOnInit() {\n    \n    // Get uid from sender\n    this.eventId = this.params.get('uid');\n\n    if (this.eventId===\"\") {\n      this.newEvent = true;\n    }else {\n      this.myEventsService.getEvent(this.eventId).then(result => {\n      console.log(\"list\");\n       this.event = <FullEvent>result;\n    });\n    }\n\n  }\n  \n  save(eid){\n    var x : FullEvent = this.event\n    if (!this.checkValue()) {\n      alert(\"Fyll i alla fält!\")\n      return false\n    }\n    this.checkPicture();\n\n    // If the user is creating a new event.\n    if (this.newEvent) {\n      \n      var timeStamp = this.dateHandlerService.getTimeStamp();\n      x.uid = this.myUsersService.loggedInUserId + '-' + timeStamp;\n      var newRef = this.myEventsService.updateEvent(x.uid, x);\n      this.router.navigate(['/UserEvents']);\n      return false;\n\n    }else {\n      this.myEventsService.updateEvent(x.uid ,x);\n      this.router.navigate(['/My-show-detailsview', { uid: x.uid }]);\n      return false;\n    }\n  }\n\n  checkValue() {\n    console.log(\"inside checkValue\")\n    var newEvent = {name: this.event.name,\n                    start_date: this.event.start_date,\n                    end_date: this.event.end_date,\n                    start_time: this.event.start_time,\n                    end_time: this.event.end_time,\n                    description: this.event.description,\n                    adress: this.event.adress,\n                    comments: [null],\n                    price: this.event.price,\n                    organizer: this.event.organizer,\n                    phone: this.event.phone,\n                    email: this.event.email}\n    for (var i in newEvent) {\n      if(newEvent[i] === \"\" || newEvent[i] === undefined) {\n        return false\n      }\n    }\n    return true\n  }\n\n  checkPicture() {\n    if (this.event.imageURL === \"\" || this.event.imageURL === undefined) {\n      this.event.imageURL = \"http://cdn.almoststill.com/wp-content/uploads/2014/11/img-placeholder-dark.jpg\";\n    }\n  }\n\n  delete() {\n    var x;\n    if (confirm(\"Är du säker?\") == true) {\n        x = \"Evenemanget raderades!\";\n        this.myEventsService.removeEvent(this.eventId);\n        this.router.navigate(['/Home']);\n    } else {\n        x = \"Avbröts\";\n    }\n    return false;\n  }\n\n  cancel() {\n    var x : FullEvent = this.event\n    if (!x.uid) {\n      this.router.navigate(['/UserEvents']);\n    }else {\n      this.router.navigate(['/My-show-detailsview', {uid: x.uid}]);\n    }\n    \n    return false;\n  }\n  \n  takePicture() {\n    console.log(\"take photo\");\n    navigator.camera.getPicture((src) => {\n      /*Upload image to storage//this._zone.run(() => {\n        console.log(\"inside zone...\");\n        //var encodedImgae = window.btoa(src);\n        //this.event.imageURL = window.atob(encodedImgae);\n        //this.event.imageURL = \"data:image/jpeg;base64,\" + src;\n        //this.event.imageURL = this.encodeImageUri(src);\n        //console.log(src);\n        this.cameraService.uploadData(src);\n        //this.debug(src);\n      });*/\n      console.log(\"inside getPicture callback\");\n      this.getFileContentAsBase64(src, (base64Image) => {\n      //window.open(base64Image);\n      //console.log(base64Image); \n      this._zone.run(() => {\n        console.log(\"inside _zone callback\");\n        this.event.imageURL = base64Image;\n        //console.log(this.event.imageURL);\n      });\n      // Then you'll be able to handle the myimage.png file as base64\n      console.log(\"end of getPicutre success callback\");  \n    });\n    console.log(\"Last step inside success callback\");\n    //console.log(this.event.imageURL);  \n    }, (error) => {\n      console.log(\"error\" + error);\n    }, {\n      quality: 20,\n      destinationType: Camera.DestinationType.FILE_URI,\n      sourceType: Camera.PictureSourceType.CAMERA,\n        //encodingType: Camera.EncodingType.JPEG,\n        mediaType: Camera.MediaType.PICTURE,\n        allowEdit: false,\n        correctOrientation: true\n    });\n  }\n  \n /* \n //Test to encode image separately\n  encodeImageUri(imageUri) {\n     var c=document.createElement('canvas');\n     var ctx=c.getContext(\"2d\");\n     var img=new Image();\n     img.onload = function(){\n       c.width=this.width;\n       c.height=this.height;\n       ctx.drawImage(img, 0,0);\n     };\n     img.src=imageUri;\n     var dataURL = c.toDataURL(\"image/jpeg\");\n     return dataURL;\n  }\n  */\n  \n  /*\n  //Test to do exacly as Cordova docs show\n  capturePhotoEdit() {\n      // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  \n      navigator.camera.getPicture(this.onPhotoDataSuccess, this.onFail, { quality: 20, allowEdit: true,\n        destinationType: Camera.DestinationType.DATA_URL });\n  }\n  \n  onPhotoDataSuccess(imageData) {\n      // Uncomment to view the base64 encoded image data\n      // console.log(imageData);\n\n      // Get image handle\n      //\n\n      // Unhide image elements\n      //\n\n      // Show the captured photo\n      // The inline CSS rules are used to resize the image\n      //\n      this.imgSrc = document.getElementsByTagName('img');\n      imgSrc.style.display = 'block';\n      \n      this._zone.run(() => {\n        //this.event.imageURL = \"data:image/jpeg;base64,\" + imageData;\n        imgSrc.src = \"data:image/jpeg;base64,\" + imageData;\n      });\n    }\n    \n    onFail(message) {\n      alert('Failed because: ' + message);\n    }*/\n    \n    //Test to do encoding with FileReader solution\n    \n    getFileContentAsBase64(path,callback){\n      console.log(\"inside getFileContent\");\n      setTimeout(() => {\n        console.log('C-J next cycle');\n        window.resolveLocalFileSystemURL(path, gotFile, fail);\n      });\n      \n      function fail(e) {\n          alert('Cannot found requested file');\n      }\n     \n      function gotFile(fileEntry) {\n        console.log(\"inside gotFile\")\n           fileEntry.file(function(file) {\n\n             console.log(\"inside gotFile callback 1 \");\n             console.log(\"undrar om detta kommer up!\")\n             //Kommer inte hit på Android ... alls ... \n             //console.log(file);\n              var reader = new FileReader();\n              \n              try {\n                console.log(\"Vi är förbi new FileReader\");\n                \n                //reader.onload = function (e) {\n                  //console.log(\"inside onloaded callback\");\n                  //console.log(e);\n                  //var content = this.result;\n                  //console.log(content + \"content\");\n                  //console.log(this.result + \" this.result\");\n                  //callback(content);\n                //};\n                /*reader.onerror = function () {\n                  console.log('ERROR!');\n                  console.log(arguments);\n                };*/\n                reader.onloadend = function(e) {\n                  console.log(\"inside onloadedend callback\");\n                  //console.log(e);\n                  var content = this.result;\n                  //console.log(content + \"content\");\n                  //console.log(this.result + \" this.result\");\n                  //setTimeout(function () {\n                    callback(content);\n                  //});\n                };\n                console.log('CJ#1');\n                // The most important point, use the readAsDatURL Method from the file plugin\n                reader.readAsDataURL(file);\n                console.log('CJ#2');\n              } catch(e) {\n                console.log('catch');\n                console.log(e);\n              }\n           });\n      console.log(\"gotFile end\");     \n      }\n      console.log(\"getFileContent end\");\n    }\n  \n  debug(stuff) {\n    console.log(stuff);\n    this.cameraService.uploadData(stuff);\n  }\n}\n\n"]}